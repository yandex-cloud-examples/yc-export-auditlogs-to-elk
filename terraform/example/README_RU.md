## Развертывание примера через Terraform

1) Заполните файл `variables.tf`
2) Запустите:

```
terraform init
terraform apply
```

Terraform модуль создает следующий набор объектов в Yandex.Cloud:
1) Сеть VPC с тремя подсетями (по одной в каждой из зон доступности)
2) Сервисный аккаунт с ролью `storage.admin` для создания бакета в Object Storage
2.1) Статический ключ для сервисного аккаунта
2.2) S3 бакет
3) Сервисный аккаунт с правами `storage.editor` для дальнейшей работы с бакетом
4) Кластер ElasticSearch из модуля `yc-managed-elk`
5) Контейнер и COI-инстанс из модуля `yc-elastic-trail`

После выполнения установки Terraform, в консоли будут выведены: FQDN-адрес кластера ElasticSearch, имя администратора для входа в консоль, и скрытый пароль. Для отображения пароля необходимо выполнить команду:

```
 terraform output elk-pass
```

По окончанию установки необходимо развернуть сервис [AuditTrails](https://cloud.yandex.ru/docs/audit-trails/quickstart) через консоль Yandex.Cloud, создать сервисную учетную запись по инструкции, и указать созданный модулем бакет. 

> **Важно:** Необходимо указать пустой префикс для бакета, либо изменить префикс в вызове модуля `yc-elastic-trail` в файле `main.tf`.

> **Важно:** Необходимо включить NAT на созданных подсетях.